SELECT COUNT(*)
FROM ALLDRINKS;

INSERT INTO ALLDRINKS VALUES( 'BOMBAY' );
INSERT INTO ALLDRINKS VALUES( 'GORDONS' );
INSERT INTO ALLDRINKS VALUES( 'VICKERS' );

INSERT INTO DRINKERS VALUES ('DAVID');
INSERT INTO DRINKERS VALUES ('ALICE');

ALTER TABLE SERVES MODIFY PRICE DECIMAL(7,2) NOT NULL,
	ADD CONSTRAINT SERVES_CHK CHECK (PRICE BETWEEN 0.00 AND 90000.00);

ALTER TABLE LIKES MODIFY RATING DECIMAL(2) NOT NULL,
	ADD CONSTRAINT LIKES_CHK CHECK (RATING BETWEEN 1 AND 10);

INSERT INTO SERVES VALUES('LAZY LOBSTER', 'BOMBAY', 5.50);
INSERT INTO SERVES VALUES('LAZY LOBSTER', 'VICKERS', 3.50);
INSERT INTO SERVES VALUES('GREASY FORK', 'BOMBAY', 6.50);
INSERT INTO SERVES VALUES('CAPTAIN MOORE', 'BOMBAY', 7.50);
INSERT INTO SERVES VALUES('CAPTAIN MOORE', 'GORDONS', 10.50);
INSERT INTO SERVES VALUES('LONG JOHN', 'GORDONS', 10.50);
INSERT INTO SERVES VALUES('LONG JOHN', 'BOMBAY', 6.50);
INSERT INTO SERVES VALUES('LONG JOHN', 'VICKERS', 4.00);

UPDATE SERVES
SET price = price * 0.9
WHERE pub = 'LITTLE PIRATE';

SELECT pub, drink, price
FROM SERVES
WHERE pub = 'LONG JOHN';

SELECT L.pub, COUNT(drink)
FROM LOCATED L LEFT JOIN SERVES S ON L.pub = S.pub
GROUP BY L.pub
HAVING COUNT(*) > 3;

INSERT INTO LIKES VALUES('PETER', 'BOMBAY', 7);

UPDATE LIKES
SET rating = 6
WHERE drinker = 'JAMES' and drink = 'RUM';

INSERT INTO LIKES VALUES('DAVID', 'GORDONS', 5);

INSERT INTO ORDERS VALUES('DAVID', 'LONG JOHN', STR_TO_DATE('19-MAY-2020', '%d-%M-%Y'), 'GORDONS', 1);
INSERT INTO ORDERS VALUES('DAVID', 'LONG JOHN', STR_TO_DATE('19-MAY-2020', '%d-%M-%Y'), 'BOMBAY', 2);
INSERT INTO ORDERS VALUES('ALICE', 'LONG JOHN', STR_TO_DATE('19-MAY-2020', '%d-%M-%Y'), 'BOMBAY', 1);


SELECT drinker, pub, drink
FROM ORDERS
WHERE odate BETWEEN STR_TO_DATE('18-MAY-2020', '%d-%M-%Y') AND STR_TO_DATE('20-MAY-2020', '%d-%M-%Y');



SELECT drinker, COUNT(drink)
FROM ORDERS 
GROUP BY drinker
ORDER BY drinker;

SELECT AD.drink, SUM(IFNULL(RATING, 0)) TOTAL_RATING
FROM ALLDRINKS AD LEFT JOIN LIKES L ON AD.drink = L.drink
GROUP BY AD.drink
ORDER BY TOTAL_RATING DESC;

CREATE TABLE MESSAGE( mbody VARCHAR(25), CONSTRAINT MESSAGE_PKEY PRIMARY KEY (mbody) );


INSERT INTO MESSAGE VALUES ( 'Hello world !!!' );

ALTER TABLE MESSAGE MODIFY mbody VARCHAR(50);

UPDATE MESSAGE SET mbody = 'Hello my world !!!' WHERE mbody LIKE 'Hello%';


DELETE FROM ORDERS 
WHERE odate = STR_TO_DATE('19-MAY-2020', '%d-%M-%Y');

DROP TABLE MESSAGE;

